### Day 36.
#### Today I learned about how to create signup and login page using JWT. We need to install json web token ad bcryptjs to create a token. First we create a route to app that handles user sign- ups when the POST request is sent to /signup. We have request body which contains username and password and extract them. Then we need to check if the user already exits or not. If the user already exists, send back the response with 400  status which means a bad request along with the message the user already exists. If new use, it hashes the password using bcrypt , which means the password will not be plain text. 
```js
const hashedPassword = await bcrypt.hash(password, 10);
users.push({ username, password: hashedPassword });
```
#### we take the password and using bcrypt library to convert it into a secured hashed password. The 10 is the number of salt rounds which means how strong the hashing will be. We use await to wait till the password hashing completion before moving to next question. Once the password is hashed the new user is added by adding object with username and the hashed password. Once added it sends a response with 201 status and tells the user was created successfully. 
#### Then we create a route to app that handles user login when the POST request is sent to /login. We get username and password from the request body. Checks the user in the users array with username. If the user is not exists, it sends us the response with invalid credentials. If the user exists, we need to compare the password that already stored and the password given while login is same or not. To check this we use bcrypt.compare instead of decoding it manually it does the decoding and compare it and return true if it matches otherwise false. If the password matched it creates a JWT. 
#### const token = jwt.sign({ username }, secretKey, { expiresIn: '1h' }); the JSON web token is created in the format header, payload, signatures. Here, username is the data we put inside the token as payload. It stores the username, so the server can recognize to whom the token is given. We have a secretKey  used to sign the token. Then we set the token to expire in 1 hr, the user needs to log in after one hour. It send us a success message along with the token, which the client can use to stay logged in. Then tested it with POSTMAN. 
#### Then I confused with token, JWT and secret key. Then asked my mentor about it. Token is used to tell the server that this user have this token and they can login with it only if the token is valid. Secret key is like to sign the token that I am the user. JWT is used to create that token which indicated the user is valid and we use this for authentication for the request user is giving. Then while testing the end points using POSTMAN, I need to create a new user every time. So anna told using environment we can set the variables, so we no need to create new one. Then I learned how to set environments. I created a new environment is postman and named it. Then created a variables as tokens, username and base URL. Then created a script for the login and signup endpoints. we send the signup request with username and password, After that we use that to login request. If the login is successful It creates a token and send it back. We use script to save the token as an environment variables. So for any request we use this token in the authorization and it will replace a actual token value automatically. 
#### Then I learned about file system. In node.js we have a built â€“ in module called fs module, it works with the files in our system. Using this module we can read the content of the file, write something and we can delete a file. fs.readFile() helps us to read a file. if we want to create and update a file we can use fs.writeFile(). Fs.existsSync() is used to check if the folder exists and it will be in synchronous means it waits for the result before moving to the next line of code. Fs.exists() is used to check the folder exists or not in asynchronous manner means lets the other code to run while but now it is not used.
#### Then I learned how to create and write in file and also how to authenticate it. Created a /signup where the user signs up and the username and password are taken. If the username already exixts it returns an error. Otherwise it is added to the user.json file and JWT token is generated. When the user login, the server checks if the username exits. It the username exits. It then compare the entered password with the stored password. if it matches JWT token is created for authentication. 
```js
const token = jwt.sign({ username }, secretKey, { expiresIn: '1m' });
```
#### It creates a token for a user with a payload containing their username, signs it using a secret key, and sets it to expire in 1 minute. The generated token can then be sent to the user to authenticate their future requests.
#### /todos server has three endpoints GET, POST, DELETE. Using GET we can retrieve all the items from todo.json only if the user is authenticated with valid token. Using POST we can add a new item in list and can be done if only the authentication token is valid. Delete a item in todo list by its id only if the user has authenticated token. The server uses JWT, means the user need to send a valid token with their request to access the /todo. 
#### Thank you
