### Day 40.
#### I was using JavaScript to write code in node.js. Anna told me to write it in typescript, because when I use javascript in response if I give random text in response it is not showing error. So using typescript is very important. So today I learned how to use typescript in node.js. Then I learned how to create all the signup, login, and todos with GET, POST, DELETE request. Also I have used fire store as databse to save all the use inputs. 
#### I created two controllers as authController and todoController. In authController I have created two functions for user authentication one for signup and another for logging in. When someone signs up the code first checks if the user already exists in the fire store databse by using const userRef = db.collection("users").doc(email); If the user does not exists it hashes the password using bcrypt, then saves the email and the hashed password in the database using set function. Then return the status 201 once the signup is successful Then created a login function, when someone logs in we check the user in the database. If the user is existing we check for the password entered and the hashed one in the database matches. If it is matched, we created a JWT token, so that the user can use to access protected parts of the app. And also I have set the expireIn: “1h”, so the token will expire in one hour. If any error occurs we return a response with 500 status. 
#### Also I have installed openAI in my application to set the difficulty of the to-do. The AI will analyse and give the to-do whether it is difficult or medium or easy. First I have created a openAI API key. Then saved that key in .env file in the root of my application and that creates a connection to openAI using that key.  First created a instance of openAI by calling the new openAI and passes the API key from.env. After that created a function categorizeTask which takes a text from the to-do as the input. It sends a message to openAI’S GPT-3.5 by calling openai.chat.completions.create(). It asks the AI to categorize the task into easy, medium, Hard. The reponse from the AI is stored in the result. 
#### Then created a todo controller for viewing, adding, and deleting the task. First I created a fuction for getTodos , it checks the user with their email from the JWT token, then loosks in the firestore database for todos for that particular user and send back the list of it. Then Created a createTodo function that allows a user to add new todo. It takes the text from the request, send it to the categorize task to get the difficulty of it. Then saved the new todo in the database with the user’s email and the current time. Then created a function to delete a specific todo. First we need to check if the todo exits and belongs to the user based on the email. If its true it will be deleted. Otherwise, it sends the user is not allowed to delete that. 
#### Before this I have created a file index.d.ts to set the global types. I have a user and the user is depend on email. So instead of writing the user?:{email :string } for everywhere we can simply define it in global type. We extend the Request from express to add our custom data. Fist we need to install library. Declare global means we are adding to the global TypeScript types. We are adding a new additional property called user to every request. the user will always have an email as string. When we are adding authentication, we often add the users data to request after verifying a token. By doing this it will be done easier.  
#### Today I have learned how powerful and safe to use typescript in backend development. Also now I understand how to build an authentication, store data in firestore, and how to implement open AI in the application for the smart task categorization and securing the app using the JWT token. It was a very productive day. I have gained many more knowledge on how the backend process runs using the typescript and node.js
#### Thank you.
